<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--     <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.5.1.min.js"></script> -->
    <script src="https://s3.pstatp.com/cdn/expire-1-M/jquery/3.2.1/jquery.min.js"></script>
    <title>CCAL</title>
    <style type="text/css">
        /* 右下角显示 */
        .rigdown {
            position: fixed;
            bottom: 3px;
            right: 0;
            padding: 8px;
        }
    </style>
</head>

<body>
    <h3 style="text-align: center;">择日</h3>
    <div style="text-align: center;">
        <form action="/" style="text-align: center; height: 30px;" id="form1" method="POST" name="myform"
            onsubmit="return formonsub()">
            <!-- 下拉年 -->
            <!-- 农历年(1601~3498): <input type="text" name="ly" style="width: 40px" /> -->
            <!-- 创建下拉年数字 -->
            <select name="ly" id="yearid" style="height: 0.8cm;">
                <script>
                    var d = new Date();
                    var year = d.getFullYear();//当前年数字
                    // console.log(year);
                    var yearSelect = document.getElementById("yearid");
                    for (var i = 1601; i <= 3498; i++) {
                        var opt = document.createElement("option");//生成option
                        opt.value = i;
                        opt.text = i + "年";
                        yearSelect.appendChild(opt);//添加option到select
                    }
                    //添加select到from1表单
                    document.body.appendChild(document.getElementById("form1"));

                    //默认显示本年数字
                    var def = year;
                    document.getElementsByName("ly")[0].value = def;
                </script>
            </select>
            <!-- 下拉月份 -->
            <select name="lm" style="height: 0.8cm;">
                <option value="1">正月(寅)</option>
                <option value="2">二月(卯)</option>
                <option value="3">三月(辰)</option>
                <option value="4">四月(巳)</option>
                <option value="5">五月(午)</option>
                <option value="6">六月(未)</option>
                <option value="7">七月(申)</option>
                <option value="8">八月(酉)</option>
                <option value="9">九月(戌)</option>
                <option value="10">十月(亥)</option>
                <option value="11">十一月(子)</option>
                <option value="12">十二月(丑)</option>
            </select>
            <!-- 下拉日期 -->
            <select name="ld" style="height: 0.8cm;">
                <option value="1">初一</option>
                <option value="2">初二</option>
                <option value="3">初三</option>
                <option value="4">初四</option>
                <option value="5">初五</option>
                <option value="6">初六</option>
                <option value="7">初七</option>
                <option value="8">初八</option>
                <option value="9">初九</option>
                <option value="10">初十</option>
                <option value="11">十一</option>
                <option value="12">十二</option>
                <option value="13">十三</option>
                <option value="14">十四</option>
                <option value="15">十五</option>
                <option value="16">十六</option>
                <option value="17">十七</option>
                <option value="18">十八</option>
                <option value="19">十九</option>
                <option value="20">二十</option>
                <option value="21">廿一</option>
                <option value="22">廿二</option>
                <option value="23">廿三</option>
                <option value="24">廿四</option>
                <option value="25">廿五</option>
                <option value="26">廿六</option>
                <option value="27">廿七</option>
                <option value="28">廿八</option>
                <option value="29">廿九</option>
                <option value="30">三十</option>
            </select>
            <!-- 时辰 子时1 丑时2 寅时3... -->
            <select name="lh" style="height: 0.8cm;">
                <option value="1">子时(23~1)</option>
                <option value="2">丑时(1~3)</option>
                <option value="3">寅时(3~5)</option>
                <option value="4">卯时(5~7)</option>
                <option value="5">辰时(7~9)</option>
                <option value="6">巳时(9~11)</option>
                <option value="7">午时(11~13))</option>
                <option value="8">未时(13~15)</option>
                <option value="9">申时(15~17)</option>
                <option value="10">酉时(17~19)</option>
                <option value="11">戌时(19~21)</option>
                <option value="12">亥时(21~23)</option>
            </select>
            <!--生肖选择-->
            <select name="la" style="height: 0.8cm;">
                <option value="1">子水鼠</option>
                <option value="2">丑土牛</option>
                <option value="3">寅木虎</option>
                <option value="4">卯木兔</option>
                <option value="5">辰土龙</option>
                <option value="6">巳火蛇</option>
                <option value="7">午火马</option>
                <option value="8">未土羊</option>
                <option value="9">申金猴</option>
                <option value="10">酉金鸡</option>
                <option value="11">戌土狗</option>
                <option value="12">亥水猪</option>
            </select>
            <!--闰月选择-->
            <select name="le" style="height: 0.8cm;">
                <option value="f">非闰月</option>
                <option value="t">闰月</option>
            </select>
            <input type="submit" style="height: 0.8cm;" />
        </form>
    </div>
    <!-- 横线 -->
    <hr>
    <!--点击按钮 -->
    <div style="text-align: center;">
        <tr>
            <td>
                <button id="jnBtn" onclick="jinian()">纪年信息</button>
                <button id="dmjBtn" onclick="dmj()">地母经</button>
                <button id="zejiBtn" onclick="zeji()">小六壬择吉</button>
                <button id="xjbfBtn" onclick="xjbfs()">择日(协纪辩方书)</button>
                <button id="tongshuBtn" onclick="tongshu()">择日(通书)</button>
                <button id="listdayBtn" onclick="listday()">月历表</button>
                <button id="jqBtn" onclick="jq()">节气</button>
                <!--跳转择日页面-->
                <a href="/ccal"> <button onchange="yj()"><b>宜忌页面</b></button></a>
                <!-- 今日信息 -->
                <a href="/today"> <button onchange="today()"><b>今日信息</b></button></a>
                <!-- 跳转干支查询页面 -->
                <a href="/jz60"><button onchange="jz60page()"><b>干支查询页面</b></button></a>
            </td>
        </tr>
    </div>

    <!-- 显示点击按钮对应的信息 纪年信息 地母经 小六壬择吉共用一个显示页面 -->
    <p id="showInfo"></p>
    <!-- 月历表 单独显示 -->
    <p id="DAY" style="text-align: left;"></p>
    <!-- 24节气 单独显示 -->
    <p id="JQ" style="table-layout: auto;"></p>

    <script type="text/javascript">
        //提交表单数据到服务器
        function formonsub() {
            //表单验证
            var x = document.forms["form1"]["ly"].value;
            if (x == null || x == "") {
                alert("输入农历年份时间可以直接查看 不用点提交^_^");
                return false;
            }
            if (x < 1601 || x > 3498) {
                alert("时间范围1601-3498");
                return false;
            }
            $.ajax({
                type: "POST",
                url: "/",
                data: $('#form1').serialize(),
                success: function (data) {
                    console.log("formdata=", data);
                    if (data.resultCode == 200) {
                        //alert("提交成功");
                    };
                }
            });
            return false;
        }
        //纪年信息
        function jinian() {
            $.ajax({
                type: "POST",
                dataType: "json",
                url: "/", //url
                data: $('#form1').serialize(),
                success: function (data) {
                    //console.log(data.jinianInfo)
                    var p = document.getElementById("showInfo")
                    p.innerHTML = data.jinianInfo;
                },
                error: function (data) {
                    alert("纪年异常！");
                }
            });
        }
        //地母经
        function dmj() {
            $.ajax({

                type: "POST",
                dataType: "json",
                url: "/", //url
                data: $('#form1').serialize(),
                success: function (data) {
                    var p = document.getElementById("showInfo")
                    p.innerHTML = data.dmInfo
                },
                error: function (data) {
                    alert("地母经异常！");
                }
            });
        }
        //小六壬择吉
        function zeji() {
            $.ajax({
                type: "POST",
                dataType: "json",
                url: "/", //url
                data: $('#form1').serialize(),
                success: function (data) {
                    var p = document.getElementById("showInfo")
                    p.innerHTML = data.starnameInfo + "<br />" + data.starInfo + "<br />" + data.zejiInfo
                },
                error: function (data) {
                    alert("择吉异常！");
                }
            });
        }
        //择日-协纪辩方书
        function xjbfs() {
            $.ajax({
                type: "POST",
                dataType: "json",
                url: "/", //url
                data: $('#form1').serialize(),
                success: function (data) {
                    var p = document.getElementById("showInfo");
                    p.innerHTML = data.xjbfsNB +
                        "<br />" + data.yjName + "<br />" + data.starName +
                        "<br />" + data.xjbfsYB +
                        "<br />" + data.xjbfsRB +
                        "<br />" + data.xjbfsBW +
                        "<br />" + data.tsRSZL;
                },
                error: function (data) {
                    alert("协纪辩方书异常!");
                }
            });
        }
        //择日-通书
        function tongshu() {
            $.ajax({
                type: "POST",
                dataType: "json",
                url: "/", //url
                data: $('#form1').serialize(),
                success: function (data) {
                    //通书 写入html内容
                    var p = document.getElementById("showInfo")
                    p.innerHTML = '待补充...';
                },
                error: function () {
                }
            });
        }
        //24节气
        function jq() {
            $.ajax({
                type: "POST",
                dataType: "json",
                url: "/",
                data: $('#form1').serialize(),
                success: function (data) {
                    var p = document.getElementById("JQ");
                    var jq = data.jqInfo
                    p.innerHTML = jq[0] + jq[1] + jq[2] + jq[3] + jq[4] + jq[5] + '<br />' +
                        jq[6] + jq[7] + jq[8] + jq[9] + jq[10] + jq[11] + '<br />' +
                        jq[12] + jq[13] + jq[14] + jq[15] + jq[16] + jq[17] + '<br />' +
                        jq[18] + jq[19] + jq[20] + jq[21] + jq[22] + '<br />' +
                        jq[23] + jq[24] + jq[25] + jq[26] + '<br />'
                },
                error: function (data) {
                    alert("24节气异常！");
                }
            });
        }
        //月历表
        function listday() {
            $.ajax({
                type: "POST",
                dataType: "json",
                url: "/", //url
                data: $('#form1').serialize(),
                success: function (data) {
                    var p = document.getElementById("DAY");
                    p.innerHTML = data.listdayInfo;
                },
                error: function (data) {
                    alert("月历表异常！");
                }
            });
        }
        //跳转到宜忌页面
        function yj() {
            window.open("/ccal");
        }
        //今日信息
        function today() {
            window.open("/today");
        }
        //干支查询页面
        function jz60page() {
            window.open("/jz60");
        }
    </script>

    <!-- 网页计数 https://www.jb51.net/article/31349.htm-->
    <div class="rigdown">
        <p id="rig"></p>
    </div>
    <script language="JavaScript">
        var caution = false
        function setCookie(name, value, expires, path, domain, secure) {
            var curCookie = name + "=" + escape(value) +
                ((expires) ? "; expires=" + expires.toGMTString() : "") +
                ((path) ? "; path=" + path : "") +
                ((domain) ? "; domain=" + domain : "") +
                ((secure) ? "; secure" : "")
            if (!caution || (name + "=" + escape(value)).length <= 4000)
                document.cookie = curCookie
            else
                if (confirm("Cookie exceeds 4KB and will be cut!"))
                    document.cookie = curCookie
        }
        function getCookie(name) {
            var prefix = name + "="
            var cookieStartIndex = document.cookie.indexOf(prefix)
            if (cookieStartIndex == -1)
                return null
            var cookieEndIndex = document.cookie.indexOf(";", cookieStartIndex + prefix.length)
            if (cookieEndIndex == -1)
                cookieEndIndex = document.cookie.length
            return unescape(document.cookie.substring(cookieStartIndex + prefix.length, cookieEndIndex))
        }
        function deleteCookie(name, path, domain) {
            if (getCookie(name)) {
                document.cookie = name + "=" +
                    ((path) ? "; path=" + path : "") +
                    ((domain) ? "; domain=" + domain : "") +
                    "; expires=Thu, 01-Jan-70 00:00:01 GMT"
            }
        }
        function fixDate(date) {
            var base = new Date(0)
            var skew = base.getTime()
            if (skew > 0)
                date.setTime(date.getTime() - skew)
        }
        var now = new Date()
        fixDate(now)
        now.setTime(now.getTime() + 365 * 24 * 60 * 60 * 1000)
        var visits = getCookie("counter")
        if (!visits)
            visits = 1
        else
            visits = parseInt(visits) + 1
        setCookie("counter", visits, now)
        //var n = document.write("您是到访的第" + visits + "位用户！");
        var p = document.getElementById("rig");
        p.innerHTML = "您是到访的第" + visits + "位用户！";
    </script>
</body>

</html>