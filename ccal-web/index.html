<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.5.1.min.js"></script>
	<title>CCAL</title>
</head>

<body>
	<div>
		<!--输入部分-->
		<form action="forminput" id="form1" method="POST">
			年: <input type="text" name="ly" style="width: 40px" />
			月: <input type="text" name="lm" style="width: 40px" />
			日: <input type="text" name="ld" style="width: 40px" />
			时: <input type="text" name="lh" style="width: 40px" />
			生肖:<input type="text" name="la" style="width: 40px" />
			闰月:<input type="text" name="le" style="width: 40px" />
			<input type="button" value="确认" onclick="getinput()" />
		</form>
	</div>

	<!--查看输入数字
	<div>
		<p id="p1"></p> <p id="p2"></p> <p id="p3"></p>
	</div>
	-->

	<!--基础纪年信息-->
	<div>
		<p id="solar"></p>
		<p id="lunar"></p>
		<p id="gz"></p>
		<p id="ny"></p>
	</div>


	<script type="text/javascript">
		// AJAX提交表单到服务器
		function getinput() {
			$.ajax({
				//几个参数需要注意一下
				type: "POST", //方法类型
				dataType: "json", //预期服务器返回的数据类型
				url: "http://localhost:9090/forminput", //url
				data: $('#form1').serialize(), //这是你要传给后台的data值
				success: function(data) { //data对应上面form1的data
					console.log("data:", data); //可以在控制台查看打印的data值(form1的输入值)
					// alert("SUCCESS");
					//writehtml(data);
					jinian(data);
				},
				error: function(data) {
					console.log("err:", data)
					alert("异常！");
				}
			});
		}
		//输入结果写入网页
		function writehtml(data) {
			var p1 = document.getElementById('p1');
			var p2 = document.getElementById('p2');
			var p3 = document.getElementById('p3');
			//把数据写入到p标签里面
			p1.innerHTML = data.lunarY //这里的lunarY对应go代码结构体的json字段
			p2.innerHTML = data.lunarM
			p3.innerHTML = data.lunarD
		}
		//纪年信息
		function jinian(data) {
			var s = document.getElementById("solar")
			var l = document.getElementById("lunar")
			var g = document.getElementById("gz")
			var n = document.getElementById("ny")

			s.innerHTML = data.solarInfo
			l.innerHTML = data.lunarInfo
			g.innerHTML = data.gzInfo
			n.innerHTML = data.nyInfo
		}
	</script>

</body>

</html>
